# This is example setting (Sorry... no check)
# Please set Ansible Vault, if you custom for your site.
all:
  hosts:
    # vcsa:
    #   # ansible_host:                 '192.168.1.254'
    #   # vcenter_license:              'f600d-21ae3-5592b-249e0-cc341'
    #   ansible_host:                 '10.40.3.101'

  children:
    # esxi:
    #   hosts:
    #     esxi01:
    #       ansible_host:             '192.168.1.201'
    #       esxi_license:             ''
    #     esxi02:
    #       ansible_host:             '192.168.1.202'
    #       esxi_license:             ''
    #     esxi03:
    #       ansible_host:             '192.168.1.203'
    #       esxi_license:             ''
    #   vars:
    #     esxi_user:                  'root'
    #     esxi_password:              'Changeme-86'

  #################################################
  # Communication Platform : Datastore_East03
  #################################################
    Skype_Frontend:
      hosts:
        MCTE1SFG01:
          ansible_host:             '10.40.3.15'
        MCTE1SFG02:
          ansible_host:             '10.40.3.16'
        MCTE1SFG03:
          ansible_host:             '10.40.3.17'
        MCTE1SFG04:
          ansible_host:             '10.40.3.18'
        MCTE1SFG05:
          ansible_host:             '10.40.3.19'
        MCTE1SFG06:
          ansible_host:             '10.40.3.20'
        MCTE1SFG07:
          ansible_host:             '10.40.3.21'
        MCTE1SFG08:
          ansible_host:             '10.40.3.22'
        MCTE1SFG09:
          ansible_host:             '10.40.3.23'
        # MCTE1SFG10:
        #   ansible_host:             '10.40.3.24'

      vars:
        num_cpus:                   12
        memory_mb:                  32768
        disk_size:                  120
        append_disk:
          - size_gb:                50
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East03'

    Skype_Backend:
      hosts:
        MCTE1SBG01:
          ansible_host:             '10.40.3.24'
        MCTE1SBG02:
          ansible_host:             '10.40.3.25'
      vars:
        num_cpus:                   12
        memory_mb:                  32768
        disk_size:                  120
        append_disk:
          - size_gb:                4500
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East03'

    Skype_Witness:
      hosts:
        MCTE1SWG01:
          ansible_host:             '10.40.3.26'
      vars:
        num_cpus:                   4
        memory_mb:                  8192
        disk_size:                  100
        datastore:                  'Datastore_East03'
    
    Office_Online:
      hosts:
        MCTE1OOG01:
          ansible_host:             '10.40.3.27'
        MCTE1OOG02:
          ansible_host:             '10.40.3.28'
      vars:
        num_cpus:                   8
        memory_mb:                  32768
        disk_size:                  100
        append_disk:
          - size_gb:                50
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East03'

    Skype_Edge:
      hosts:
        MCTE1SEG01:
          ansible_host:             '10.40.3.29'
        MCTE1SEG02:
          ansible_host:             '10.40.3.30'
      vars:
        num_cpus:                   8
        memory_mb:                  16384
        disk_size:                  100
        datastore:                  'Datastore_East03'

    Skype_Frontend_Secure:
      hosts:
        MCTE1SFH01:
          ansible_host:             '10.40.3.31'
        MCTE1SFH02:
          ansible_host:             '10.40.3.32'
        MCTE1SFH03:
          ansible_host:             '10.40.3.33'
        MCTE1SFH04:
          ansible_host:             '10.40.3.34'
        MCTE1SFH05:
          ansible_host:             '10.40.3.35'
        MCTE1SFH06:
          ansible_host:             '10.40.3.36'
        MCTE1SFH07:
          ansible_host:             '10.40.3.37'
        MCTE1SFH08:
          ansible_host:             '10.40.3.38'
      vars:
        num_cpus:                   12
        memory_mb:                  32768
        disk_size:                  120
        append_disk:
          - size_gb:                50
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East03'

    Skype_Backend_Secure:
      hosts:
        MCTE1SBH01:
          ansible_host:             '10.40.3.39'
        MCTE1SBH02:
          ansible_host:             '10.40.3.40'
      vars:
        num_cpus:                   12
        memory_mb:                  32768
        disk_size:                  120
        append_disk:
          - size_gb:                3500
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East03'

    Skype_Witness_Secure:
      hosts:
        MCTE1SWH01:
          ansible_host:             '10.40.3.41'
      vars:
        num_cpus:                   4
        memory_mb:                  8192
        disk_size:                  100
        datastore:                  'Datastore_East03'

    Office_Online_Secure:
      hosts:
        MCTE1OOH01:
          ansible_host:             '10.40.3.42'
        MCTE1OOH02:
          ansible_host:             '10.40.3.43'
      vars:
        num_cpus:                   8
        memory_mb:                  32768
        disk_size:                  100
        append_disk:
          - size_gb:                50
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East03'

    Skype_Edge_Secure:
      hosts:
        MCTE1SEH01:
          ansible_host:             '10.40.3.44'
        MCTE1SEH02:
          ansible_host:             '10.40.3.45'
      vars:
        num_cpus:                   8
        memory_mb:                  16384
        hvOn:                       'no'
        disk_size:                  100
        datastore:                  'Datastore_East03'

    Skype_Photo_Server:
      hosts:
        MCTE1PIC01:
          ansible_host:             '10.40.3.46'

      vars:
        num_cpus:                   2
        memory_mb:                  4096
        hvOn:                       'no'
        disk_size:                  200
        datastore:                  'Datastore_East03'

  #################################################
  # ID Management Platform : Datastore_East02
  #################################################
    Management_ID:
      hosts:
        MCTE1IDM01:
          ansible_host:             '10.40.3.47'
          num_cpus:                 4
          memory_mb:                16384
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - unit_number:            1
              size_gb:                1500
              scsi_controller:        0
              datastore:              '{{ datastore }}'
              state:                  'present'
              type:                   'thick'


        MCTE3IDM01:
          ansible_host:             '10.40.3.48'
          num_cpus:                 2
          memory_mb:                8192
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:              500
              scsi_controller:      0
              unit_number:          1
              datastore:            '{{ datastore }}'
              state:                'present'
              type:                 'thick'

        MCTE5IDM01:
          ansible_host:             '10.40.3.49'
          num_cpus:                 4
          memory_mb:                8192
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:              500
              scsi_controller:      0
              unit_number:          1
              datastore:            '{{ datastore }}'
              state:                'present'
              type:                 'thick'

      vars:
        disk_size:                  100
        datastore:                  'Datastore_East02'

    Management_Address:
      hosts:
        # main 01
        #######################
        MCTE1ABS01:
          ansible_host:             '10.40.3.50'
          num_cpus:                 10
          memory_mb:                20480
          disk_size:                100
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:                500
              scsi_controller:        0
              unit_number:            1
              datastore:              '{{ datastore }}'
              state:                  'present'
              type:                   'thick'

        MCTE1ABS02:
          ansible_host:             '10.40.3.51'
          num_cpus:                 10
          memory_mb:                20480
          disk_size:                100
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:                500
              scsi_controller:        0
              unit_number:            1
              datastore:              '{{ datastore }}'
              state:                  'present'
              type:                   'thick'

        # main 02
        #######################
        MCTE1ABS03:
          ansible_host:             '10.40.3.52'
          num_cpus:                 10
          memory_mb:                40960
          disk_size:                100
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:                2000
              scsi_controller:        0
              unit_number:            1
              datastore:              '{{ datastore }}'
              state:                  'present'
              type:                   'thick'

        MCTE1ABS04:
          ansible_host:             '10.40.3.53'
          num_cpus:                 10
          memory_mb:                40960
          disk_size:                100
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:                2000
              scsi_controller:        0
              unit_number:            1
              datastore:              '{{ datastore }}'
              state:                  'present'
              type:                   'thick'

        # devel
        #######################
        MCTE3ABS01:
          ansible_host:             '10.40.3.54'
          num_cpus:                 2
          memory_mb:                8192
          disk_size:                100
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:              2000
              scsi_controller:      0
              unit_number:          1
              datastore:            '{{ datastore }}'
              state:                'present'
              type:                 'thick'

        MCTE5ABS01:
          ansible_host:             '10.40.3.55'
          num_cpus:                 2
          memory_mb:                8192
          disk_size:                100
          partition:
            - unit_number:            1
              partition_style:        GPT
              letter:                 D
              partition_size:         -1
              fs_type:                NTFS
          append_disk:
            - size_gb:              2000
              scsi_controller:      0
              unit_number:          1
              datastore:            '{{ datastore }}'
              state:                'present'
              type:                 'thick'
      vars:
        datastore:                  'Datastore_East02'

  #################################################
  # Mailing platform : Datastore_East01
  #################################################
    Edge_Server:
      hosts:
        MCTE1EDG01:
          ansible_host:             '10.40.3.58'
        MCTE1EDG02:
          ansible_host:             '10.40.3.59'
        MCTE1EDG03:
          ansible_host:             '10.40.3.60'
        MCTE1EDG04:
          ansible_host:             '10.40.3.61'
        MCTE1EDG05:
          ansible_host:             '10.40.3.62'
        MCTE1EDG06:
          ansible_host:             '10.40.3.63'
        MCTE1EDG07:
          ansible_host:             '10.40.3.64'
        MCTE1EDG08:
          ansible_host:             '10.40.3.65'
      vars:
        num_cpus:                   8
        memory_mb:                  131072
        hvOn:                       no
        disk_size:                  300
        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS
        append_disk:
          - size_gb:                1000
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East01'

    Exchange_HUB_Server:
      hosts:
        MCTE1HUB01:
          ansible_host:             '10.40.3.65'
        MCTE1HUB02:
          ansible_host:             '10.40.3.66'
        MCTE1HUB03:
          ansible_host:             '10.40.3.67'
        MCTE1HUB04:
          ansible_host:             '10.40.3.68'
        MCTE1HUB05:
          ansible_host:             '10.40.3.69'
        MCTE1HUB06:
          ansible_host:             '10.40.3.70'
        MCTE1HUB07:
          ansible_host:             '10.40.3.71'
        MCTE1HUB08:
          ansible_host:             '10.40.3.72'
      vars:
        num_cpus:                   8
        memory_mb:                  131072
        hvOn:                       no
        disk_size:                  300
        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS
        append_disk:
          - size_gb:                1000
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East01'

    Exchange_Watch_Server:
      hosts:
        MCTE1WTN01:
          ansible_host:             '10.40.3.82'
      vars:
        num_cpus:                   4
        memory_mb:                  8192
        disk_size:                  200
        datastore:                  'Datastore_East01'


  #################################################
  # Operating and maintanance : Datastore_East01
  #################################################

    Job_Manage_Server:
      hosts:
        MCTE1JOB01:
          ansible_host:             '10.40.3.84'
        MCTE1JOB02:
          ansible_host:             '10.40.3.85'
      vars:
        num_cpus:                   10
        memory_mb:                  30720
        hvOn:                       no
        disk_size:                  100
        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS
        append_disk:
          - size_gb:                800
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East01'

    Management_Log_Server:
      hosts:
        MCTE1LOG01:
          ansible_host:             '10.40.3.86'
      vars:
        num_cpus:                   5
        memory_mb:                  12288
        hvOn:                       no
        disk_size:                  100
        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS
        append_disk:
          - size_gb:                7729
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East01'

    WSUS_Server:
      hosts:
        MCTE1WSU01:
          ansible_host:             '10.40.3.87'
      vars:
        num_cpus:                   6
        memory_mb:                  9216
        hvOn:                       no
        disk_size:                  100
        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS
        append_disk:
          - size_gb:                1180
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East02'
  
  #################################################
  # Directory sync platform
  #################################################  
    Azure_AD_Connect_Server:
      hosts:
        MCTE1AAC01:
          ansible_host:             '10.40.3.89'
      vars:
        num_cpus:                   4
        memory_mb:                  32768
        hvOn:                       no
        disk_size:                  100
        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS
        append_disk:
          - size_gb:                900
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'
        datastore:                  'Datastore_East01'

  #################################################
  # Cloud Authentication : Datastore_East01
  #################################################
    ADFS_Server:
      hosts:
        MCTE1ADF01:
          ansible_host:             '10.40.3.90'
        MCTE1ADF02:
          ansible_host:             '10.40.3.91'
        MCTE1ADF03:
          ansible_host:             '10.40.3.92'
        MCTE1ADF04:
          ansible_host:             '10.40.3.93'
        MCTE1ADF05:
          ansible_host:             '10.40.3.94'
      vars:
        num_cpus:                   8
        memory_mb:                  8192
        hvOn:                       no
        disk_size:                  300
        datastore:                  'Datastore_East01'

    Virt_Management_Server:
      hosts:
        MCTE1VMM01:
          ansible_host:             '10.40.3.99'
          ipaddr_01:               '10.60.40.102'
        MCTE1VMM02:
          ansible_host:             '10.40.3.100'
          ipaddr_01:               '10.60.40.103'

      vars:
        num_cpus:                   2
        memory_mb:                  8192
        hvOn:                       no
        disk_size:                  100

        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS

        append_disk:
          - size_gb:                300
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'

        nic_names:
          - before:                 'Ethernet'
            after:                  '運用管理セグメント'
          - before:                 'Ethernet1'
            after:                  'バックアップセグメント'

        nic_interfaces:
          - name:                   'VLAN104_Management'
            dvswitch_name:          'DS_Service'
            device_type:            'vmxnet3'
            ip:                     '{{ ansible_host }}'
            netmask:                '255.255.255.128'
            gateway:                '10.40.3.126'
            start_connected:        true
          - name:                   'VLAN105_Backup'
            dvswitch_name:          'DS_Backup'
            device_type:            'vmxnet3'
            ip:                     '{{ ipaddr_01 }}'
            netmask:                '255.255.255.0'
            gateway:                ''
            start_connected:        true
        datastore:                  'Datastore_East01'

    Storage_Management_Server:
      hosts:
        MCTE1STM01:
          ansible_host:             '10.40.3.14'
          ipaddr_01:               '10.60.40.104'
      vars:
        num_cpus:                   4
        memory_mb:                  16384
        disk_size:                  150

        partition:
          - unit_number:            1
            partition_style:        GPT
            letter:                 D
            partition_size:         -1
            fs_type:                NTFS

        append_disk:
          - size_gb:                150
            scsi_controller:        0
            unit_number:            1
            datastore:              '{{ datastore }}'
            state:                  'present'
            type:                   'thick'

        nic_names:
          - before:                 'Ethernet'
            after:                  '運用管理セグメント'
          - before:                 'Ethernet1'
            after:                  'バックアップセグメント'

        nic_interfaces:
          - name:                   'VLAN104_Management'
            dvswitch_name:          'DS_Service'
            device_type:            'vmxnet3'
            ip:                     '{{ ansible_host }}'
            netmask:                '255.255.255.128'
            gateway:                '10.40.3.126'
            start_connected:        true
          - name:                   'VLAN105_Backup'
            dvswitch_name:          'DS_Backup'
            device_type:            'vmxnet3'
            ip:                     '{{ ipaddr_01 }}'
            netmask:                '255.255.255.0'
            gateway:                ''
            start_connected:        true

        template:                   'template20191018'

#################################################
# Global Setting (All Group vars)
#################################################
  vars:
    #################################################
    # vcenter_hostname:               '192.168.1.254'
    # vcenter_username:               'administrator@nyancat.local'
    # vcenter_password:               'Changeme-86'
    # domain_name:                    'nyancat.local'
    #################################################
    # vcenter_hostname:               '10.87.100.1'
    # vcenter_username:               'labuser@jbst-lab.local'
    # vcenter_password:               '1abP@sswd'
    # datacenter:                     'Equinix'
    # cluster:                        'vSAN'
    # datastore:                      'vsanDatastore'       # Set (Datastore / DatastoreCluster / vSAN) name
    #################################################
    vcenter_hostname:               '10.40.3.88'
    vcenter_username:               'administrator@vsphere.local'
    vcenter_password:               'PA$$wd1910'
    datacenter:                     'DC_East'
    cluster:                        'CL_East'
    datastore:                      'Datastore1'       # Set (Datastore / DatastoreCluster / vSAN) name
    #################################################

    Folders:
      - name:                       'VirtualMachine'
        type:                       'vm'
        state:                      'present'
      - name:                       'Templates' 
        type:                       'vm'
        state:                      'present'

    ResourcePools:
      - name:                       'Critical'
        state:                      'present'

    Networks:
      - pg_name:                    'VM Network'
        vswitch:                    'vSwitch0'
        vlan_id:                    0
        state:                      'present'
      - pg_name:                    'Default'
        vswitch:                    'vSwitch0' 
        vlan_id:                    1
        state:                      'present'
    Templates:
      - template:                   'WindowsServer2016'
        image_path:                 '{{ inventory_dir }}/ova/WindowsServer2016.ovf'
        dst:                        'datastore1'

    # Machine customization
    ###############################################
    statement:                      'present'
    num_cpus:                       1
    memory_mb:                      16384
    hvOn:                           no
    bootfirm:                       'efi'

    disk_size:                      120
    disk_type:                      'thick'
    append_disk_size:               0
    append_disk_type:               'thick'

    template:                       'templates20191024'



    # Credential
    ###############################################
    #userename:                      'Administrator'
    ansible_user:                   'Administrator'
    ansible_password:               '{{ vcenter_password }}'
    ansible_port:                   '5985'
    ansible_connection:             'winrm'
    ansible_winrm_scheme:           'http'
    ansible_winrm_server_cert_validation: ignore
    domain_name:                    ''


    # Networks
    ###############################################
    nic_names:
      - before:                 'Ethernet'
        after:                  'Management'

    nic_interfaces:
      - name:                   'VLAN104_Management'
        dvswitch_name:          'DS_Service'
        device_type:            'vmxnet3'
        ip:                     '{{ ansible_host }}'
        netmask:                '255.255.255.128'
        gateway:                '10.40.3.126'
        #domain_name:            ''
        # vlan:                   0
        #   dns_servers:
        #   - 10.52.1.50
        #   - 10.52.1.51
        start_connected:        true


    partition:
      - unit_number:            none
        partition_style:        none
        letter:                 none
        partition_size:         none
        fs_type:                none

    append_disk:
      - size_gb:                none
        scsi_controller:        none
        unit_number:            none
        datastore:              none
        state:                  none
        type:                   none
